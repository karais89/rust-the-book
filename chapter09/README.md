# 챕터9. 에러 처리

안전성에 대한 러스트의 지원은 에러 처리까지 이어진다.
러스트는 에러의 발생 가능성을 인지하고 개발자가 코드를 컴파일하기 전에 에러를 처리하도록 유도한다.

## 학습 내용
- 러스트의 에러
    - 회복 가능한 에러
    - 회복 불가능한 에러
- 회복 가능한 에러는 사용자에게 문제를 보고 하고 작업을 다시 시도하도록 요청할 수 있다.
- 회복 불가능한 에러는 배열의 범위를 벗어나는 메모리에 대한 접근처럼 항상 버그의 가능성을 내포하고 있다.
- 러스트는 예외라는 개념은 없다.
- 회복 가능한 에러 = Result<T, E>
- 회복 불가능한 에러 = panic!
- 에러가 발생했을 에러로부터 회복을 시도할 것인지 아니면 실행을 중단할 것인지 결정할때 고려해야 할 요소들도 알아본다.

## 느낀점

- 에러 처리가 다른 언어에 비해 깔끔하고 좋은 것으로 보인다. try-catch문이 없어서 그런가..
- 도움 메서드 및 도움 연산자를 제공하는게 좀 신선하다. 확실히 축약해서 사용할 수 있다.

## 주요 내용

### 9.1 panic! 매크로를 이용한 회복 불가능한 에러 처리

- 코드에 문제가 생겼는데 처리할 방법이 전혀 없는 경우. 이때에 panic! 매크로를 사용한다.
- panic! 매크로를 실행하면 프로그램은 실패 메시지를 출력하고 스택을 모두 정리한 다음 종료한다.
- 패닉은 대부분 어떤 종류의 버그가 발견되었는데 개발자가 이 에러를 처리할 방법이 마땅치 않을 때 활용한다.

### 9.2 Result 타입으로 에러 처리하기
- 대부분 에러는 프로그램 완전히 종료해야 할 정도로 치명적이지 않는다.
- 대부분은 함수 호출에 실패하면 쉽게 그 이유를 파악해서 대처할 수 있다.
- 예를 들어 파일을 열려고 하는데 파일이 없어서 작업에 실패하면 프로세스를 종료하는 대신 파일을 생성해 주면 된다.
- match 표현식을 통해 에러 처리
- 더 쉬운 방법은 unwrap과 expect
- unwrap은 도움 메서드 Result 타입의 값이 Ok 열것값이라면 OK 열것값에 저장된 값을 리턴. Err 열것값이라면 panic! 매크로를 호출
- expect는 unwrap과 유사하지만 panic! 매크로에 에러 메시지를 전달한다.
- 에러의 전파
    - 실패할 가능성이 있는 함수를 호출하는 함수를 작성할 때는 에러를 함수 안에서 처리하지 않고 호출하는 코드에 에러를 처리하게 할 수 있다.
- 에러 전파를 위해 ? 연산자를 제공한다.
    - Ok면 Ok 열것값에 저장된 값 리턴, Err이면 Err 열것값이 return 키워드를 사용한 것처럼 전체 함수의 리턴값이 되어 호출자로 에러가 전파된다.
- Box<dyn Error> 타입은 모든 종류의 에러를 의미한다.

### 9.3 패닉에 빠질 것인가? 말 것인가?
- panic! 매크로 or Result 타입 선택
- 패닉에 빠지면 회복 방법이 없다.
- Result은 호출자에게 선택지를 줄 수 있다.
- 그래서 실패할 가능성이 있는 함수를 작성할 때는 대체로 Result 타입을 리턴 할 것을 권한다.
- 드물지만 panic을 발송하는게 적절할 때가 있다.
    - 예제, 프로토타입 코드, 그리고 테스트
    